<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenLayers Map with OSM, Google Satellite, and WMTS</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v7.3.0/ol.css" type="text/css">
    <style>
        #map {
            width: 100%;
            height: 100vh;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/ol@v7.3.0/dist/ol.js"></script>
</head>
<body>
    <div id="map"></div>
    <script type="text/javascript">
        // Create OSM and Google Satellite base layers
        const osmLayer = new ol.layer.Tile({
            source: new ol.source.OSM()
        });

        const googleSatelliteLayer = new ol.layer.Tile({
            source: new ol.source.XYZ({
                url: 'http://www.google.cn/maps/vt?lyrs=s&x={x}&y={y}&z={z}'
            })
        });

        // Define WMTS sea water velocity layer
        const wmtsSource = new ol.source.WMTS({
            url: 'https://wmts.marine.copernicus.eu/teroWmts/GLOBAL_ANALYSISFORECAST_PHY_001_024/cmems_mod_glo_phy-cur_anfc_0.083deg_PT6H-i_202406',
            layer: 'sea_water_velocity',
            matrixSet: 'EPSG:3857',  // Ensure the correct projection
            format: 'image/png',
            projection: 'EPSG:3857',
            tileGrid: new ol.tilegrid.WMTS({
                origin: ol.extent.getTopLeft(ol.proj.get('EPSG:3857').getExtent()),
                resolutions: [559082264.029, 279541132.015, 139770566.007, 69885283.0036, 34942641.5018, 17471320.7509, 8735660.37545, 4367830.18773, 2183915.09386, 1091957.54693, 545978.773466, 272989.386733, 136494.693366, 68247.346683, 34123.6733415, 17061.8366707, 8530.91833536, 4265.45916768, 2132.72958384, 1066.36479192, 533.18239596],
                matrixIds: [
                    '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20'
                ]
            }),
            style: 'default',
            dimensions: {
                'time': '2024-10-03T00:00:00Z'  // Set time for sea water velocity layer
            }
        });

        const wmtsLayer = new ol.layer.Tile({
            source: wmtsSource,
            opacity: 0.7  // Adjust layer transparency if needed
        });

        // Initialize the map with the layers
        const map = new ol.Map({
            target: 'map',
            layers: [
                osmLayer,             // OSM layer
                googleSatelliteLayer,  // Google Satellite layer
                wmtsLayer             // Copernicus Marine sea water velocity layer
            ],
            view: new ol.View({
                center: ol.proj.fromLonLat([-19.0208, 64.9631]),  // Centered on Iceland
                zoom: 5
            })
        });
    </script>
</body>
</html>
